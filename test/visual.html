<html>

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css"
        href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <style>
        textarea {
            width: 100%;
            height: 200px;
        }
    </style>
</head>

<body>
    <div id="root"></div>
    <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script crossorigin="anonymous" src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.js"></script>
    <script src="../dist/convertor.js"></script>
    <script>
        var exports = {};
    </script>
    <script src="samples.js"></script>

    <script>
        var samples = exports.samples;
        var el = React.createElement;

        ReactDOM.render(el(Page), document.getElementById('root'));

        function Page() {
            var s = React.useState("");
            var text = s[0];
            var setText = s[1];
            var items = getSamples(text);
            var downloadText = "exports.samples=" + JSON.stringify(items, null, 4);
            
            return el("div", null,
                el("textarea", {
                    className: "form-conrol",
                    onChange: function (e) {
                        setText(e.target.value)
                    }
                }),
                el("a", {
                    href: "data:text/plain;charset=utf-8," + encodeURIComponent(downloadText),
                    download: "samples.js"
                }, "Download"),
                el(FontTable, { samples: items })
            );
        }

        function FontTable(props) {
            var samples = props.samples;
            return el("table", { className: "table" },
                el("thead", null,
                    el("tr", null,
                        el("th", { scope: "col" }, "Unicode"),
                        el("th", { scope: "col" }, "Anmol"),
                        el("th", { scope: "col" }, "Dr Chartik"),
                        el("th", { scope: "col" }, "Satluj"),
                        el("th", { scope: "col" }, "Joy"),
                        el("th", { scope: "col" }, "Asees"),
                        el("th", { scope: "col" }, "Gurbani Lipi"))),
                el("tbody", null, samples.map(function (s) {
                    return el("tr", { key: s.Unicode },
                        el("th", null, s.Unicode),
                        el("th", { style: { fontFamily: "AnmolLipi" } }, s.AnmolLipi),
                        el("th", { style: { fontFamily: "Chatrik" } }, s.DrChatrikWeb),
                        el("th", { style: { fontFamily: "Satluj" } }, s.Satluj),
                        el("th", { style: { fontFamily: "Joy" } }, s.Joy),
                        el("th", { style: { fontFamily: "Asees" } }, s.Asees),
                        el("th", { style: { fontFamily: "GurbaniLipi" } }, s.GurbaniLipi));
                })));
        }

        function getSamples(text) {
            var items = _.sortBy(
                _.uniq(
                    _.compact(
                        _.concat(
                            text.split(/\s+/),
                            samples.map(function (a) { return a.Unicode })))));

            return items.map(function (i) {
                return {
                    Unicode: i,
                    AnmolLipi: PunjabiFontConvertor.convert(i, "AnmolLipi", "Unicode"),
                    DrChatrikWeb: PunjabiFontConvertor.convert(i, "DrChatrikWeb", "Unicode"),
                    Satluj: PunjabiFontConvertor.convert(i, "Satluj", "Unicode"),
                    Joy: PunjabiFontConvertor.convert(i, "Joy", "Unicode"),
                    Asees: PunjabiFontConvertor.convert(i, "Asees", "Unicode"),
                    GurbaniLipi: PunjabiFontConvertor.convert(i, "GurbaniLipi", "Unicode"),
                }
            })
        }
    </script>
</body>

</html>